<!DOCTYPE html>
<html>
<head>
    <title>Auction Homepage</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/jquery-ui/smoothness/jquery-ui.min.css">
    <link rel="stylesheet" href="assets/css/homework1.css">
</head>
<body>

<!-- Navbar -->
<div class="navbar navbar-inverse">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="javascript:void(0);">ABC Auction</a>
        </div>
        <div class="navbar-collapse collapse">
            <form class="navbar-form navbar-left navbar-input-group" role="search">
                <div class="form-group">
                    <input type="text" class="form-control" placeholder="Enter product name">
                </div>
                <button type="submit" class="btn btn-default" onclick="goToSearchResultPage();return false;">Search</button>
            </form>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="javascript:void(0)"><span class="glyphicon glyphicon-question-sign"></span> Help</a>
                </li>
                <li><a href="javascript:void(0);"><span class="glyphicon glyphicon-user"></span> Login</a></li>
                <li><a href="javascript:void(0)"><span class="glyphicon glyphicon-shopping-cart"></span> Shopping
                    cart</a></li>
            </ul>
        </div>
    </div>
</div>
<!-- / Navbar -->

<div id="indexPage" class="container">

    <div class="row">
        <!-- Featured Products -->

        <div id="featured-product-carousel" class="carousel slide" data-pause="hover" data-wrap="true"
             data-interval="3000">
            <ol class="carousel-indicators">
                <li data-target="#featured-product-carousel" data-slide-to="0" class="active"></li>
                <li data-target="#featured-product-carousel" data-slide-to="1" class=""></li>
                <li data-target="#featured-product-carousel" data-slide-to="2" class=""></li>
            </ol>
            <div class="carousel-inner">
                <div class="item active">
                    <img src="assets/img/promo-product-1.jpg" alt="ABC Auction Deals" class="img-responsive center-block">
                </div>
                <div class="item">
                    <img src="assets/img/promo-product-2.jpg" alt="ABC Auction Deals" class="img-responsive center-block">
                </div>
                <div class="item">
                    <img src="assets/img/promo-product-3.jpg" alt="ABC Auction Deals" class="img-responsive center-block">
                </div>
            </div>

            <!-- Controls -->
            <a class="left carousel-control" href="#featured-product-carousel" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <a class="right carousel-control" href="#featured-product-carousel" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right"></span>
            </a>
        </div>

        <!-- / Featured Products -->
    </div>
    <br/><br/>
    <div class="row">
        <ul id="featuredProductList" class="list-unstyled"></ul>
    </div>
</div>

<div id="searchResultPage" class="container-fluid">

    <!-- Breadcrumbs -->
    <ol class="breadcrumb">
        <li><a href="#">Home</a></li>
        <li class="active">Search results</li>
    </ol>

    <!-- Desktop -->
    <div class="visible-lg">

        <form role="search">

            <div class="row">
                <div class="col-lg-4">Product</div>
                <div class="col-lg-4">Current Price</div>
                <div class="col-lg-4">Max Auction Close Date</div>
            </div>

            <div class="row">
                <div class="col-lg-4">
                    <input class="form-control" value="Product title" placeholder="Product title">
                </div>
                <div class="col-lg-2">
                    <div class="input-group">
                        <div class="input-group-addon">$</div>
                        <input type="number" class="form-control" value="1000" placeholder="From">
                    </div>
                </div>
                <div class="col-lg-2">
                    <div class="input-group">
                        <div class="input-group-addon">$</div>
                        <input type="number" class="form-control" value="1500" placeholder="To">
                    </div>
                </div>
                <div class="col-lg-4">
                    <!-- FIXME default value somehow? -->
                    <input type="date" class="form-control" value="">
                </div>
            </div>

            <!-- TODO http://stackoverflow.com/questions/24309721/in-bootstrap-3-how-to-change-the-distance-between-rows-in-vertical dont forget to check all the br-s in the doc -->
            <br>

            <div class="row vertical-align-center">
                <div class="col-lg-4">
                    <select class="form-control">
                        <option>Category</option>
                        <option>Category 2</option>
                        <option>Category 3</option>
                    </select>
                </div>
                <div class="col-lg-4">
                    <div id="currentPriceSlider-lg"></div>
                </div>
                <div class="col-lg-4 vertical-align-center">
                    <span class="col-lg-9">Number of Bids</span>
                    <div class="col-lg-3">
                        <input type="number" class="form-control" value="3" min="0" max="99">
                    </div>
                </div>
            </div>

            <br>

            <div class="row">
                <div class="col-lg-offset-4 col-lg-4">
                    <input type="submit" class="btn btn-primary form-control" value="Find now">
                </div>
            </div>
        </form>

        <hr>

        <div id="searchResultListLg" class="row"></div>
    </div>

    <!-- Tablet -->
    <div class="hidden-lg hidden-xs">
        <form role="search">
            <div class="row">
                <div class="col-md-6 col-sm-6">Product</div>
            </div>
            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <input class="form-control" value="Product title" placeholder="Product title">
                </div>
                <div class="col-md-6 col-sm-6">
                    <select class="form-control">
                        <option>Category</option>
                        <option>Category 2</option>
                        <option>Category 3</option>
                    </select>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-6 col-sm-6">Current Price</div>
                <div class="col-md-6 col-sm-6">Max Auction Close Date</div>
            </div>

            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <div class="row">
                        <div class="col-md-6 col-sm-6">
                            <div class="input-group">
                                <div class="input-group-addon">$</div>
                                <input type="number" class="form-control" value="1000" placeholder="From">
                            </div>
                        </div>
                        <div class="col-md-6 col-sm-6">
                            <div class="input-group">
                                <div class="input-group-addon">$</div>
                                <input type="number" class="form-control" value="1500" placeholder="To">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-6">
                    <input type="date" class="form-control" value="">
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-6 col-sm-6">
                    <div id="currentPriceSlider-md-sm"></div>
                </div>
                <div class="col-md-6 col-sm-6 vertical-align-center">
                    <span class="col-md-9 col-sm-9">Number of Bids</span>
                    <div class="col-md-3 col-sm-3">
                        <input type="number" class="form-control" value="3" min="0" max="99">
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-offset-4 col-md-4 col-sm-offset-4 col-sm-4">
                    <input type="submit" class="btn btn-primary form-control" value="Find now">
                </div>
            </div>
        </form>

        <hr>

        <div id="searchResultListMdSm" class="row"></div>
    </div>

    <!-- Smartphone -->
    <div class="visible-xs container-fluid">
        <form role="search">

            <div class="row">Product</div>
            <div class="row">
                <input class="form-control" value="Product title" placeholder="Product title">
            </div>
            <br>
            <div class="row">
                <select class="form-control">
                    <option>Category</option>
                    <option>Category 2</option>
                    <option>Category 3</option>
                </select>
            </div>
            <br>
            <div class="row">Current Price</div>
            <div class="row">
                <div class="row">
                    <div class="col-xs-5 col-xs-offset-1">
                        <div class="input-group">
                            <div class="input-group-addon">$</div>
                            <input type="number" class="form-control" value="1000" placeholder="From">
                        </div>
                    </div>
                    <div class="col-xs-5 ">
                        <div class="input-group">
                            <div class="input-group-addon">$</div>
                            <input type="number" class="form-control" value="1500" placeholder="To">
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-xs-10 col-xs-offset-1">
                    <div id="currentPriceSlider-xs"></div>
                </div>
            </div>
            <br>
            <div class="row">Max Auction Close Date</div>
            <div class="row">
                <input type="date" class="form-control" value="">
            </div>
            <br>
            <div class="row">
                <div class="row vertical-align-center">
                    <span class="col-xs-8">Number of Bids</span>
                    <div class="col-xs-4">
                        <input type="number" class="form-control" value="3" min="0" max="99">
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-xs-offset-1 col-xs-10">
                    <input type="submit" class="btn btn-primary form-control" value="Find now">
                </div>
            </div>
        </form>

        <hr>

        <div id="searchResultListXs" class="row"></div>
    </div>
</div>


<!-- Footer -->
<footer class="text-center">
    <br/>
    <a href="javascript:void(0)">Home</a> |
    <a href="javascript:void(0)">Search</a> |
    <a href="javascript:void(0)">About Us</a> |
    <a href="javascript:void(0)">Terms of Service</a>
    <br/><br/>
</footer>
<!-- / Footer -->


<script src="assets/js/jquery-2.1.0.min.js"></script>
<script src="assets/js/jquery-ui-1.11.3.min.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/handlebars-v3.0.0.js"></script>
<script id="featured-product-template" type="text/x-handlebars-template">
    <li class="col-sm-4">
        <div class="col-md-4">
            <a href="javascript:void(0)"><img src="{{thumb}}" alt="" class="img-responsive"></a>
        </div>
        <div class="product-description-holder col-md-8">
            <h2><a href="javascript:void(0)">{{title}}</a></h2>
            <p><b>Item's description: </b>{{description}}</p>
        </div>
    </li>
</script>
<script id="search-result-template-lg" type="text/x-handlebars-template">
    <div class="col-lg-6">
        <div class="row">
            <div class="col-lg-6">
                <a href="javascript:void(0)"><img src="{{thumb}}" alt="" class="img-responsive"></a>
            </div>
            <div class="col-lg-6">
                <h1><u>{{title}}</u></h1>
                <p>{{description}}</p>
            </div>
        </div>
        <div class="row text-center vertical-align-center">
            <div class="col-lg-4">
                <h3><b>{{timeleft}}h left</b></h3>
            </div>
            <div class="col-lg-4">
                <span><h3><img src="assets/img/icon-eye.png" alt=""><b>{{watchers}}</b></h3></span>
            </div>
            <div class="col-lg-4">
                <h3><b>$ {{price}}</b></h3>
            </div>
        </div>
        <div class="row text-center">
            <div class="col-lg-4">
                <h4>Today 15:23</h4>
            </div>
            <div class="col-lg-4">
                <h4>Watchers</h4>
            </div>
            <div class="col-lg-4">
                <h4>Current Price</h4>
            </div>
        </div>
    </div>
</script>
<script id="search-result-template-md-sm" type="text/x-handlebars-template">
    <div class="col-md-12 col-sm-12">
        <div class="row">
            <div class="col-md-6 col-sm-6">
                <a href="javascript:void(0)"><img src="{{thumb}}" alt="" class="img-responsive"></a>
            </div>
            <div class="col-md-6 col-sm-6">
                <h1><u>{{title}}</u></h1>
                <p>{{description}}</p>
            </div>
        </div>
        <div class="row text-center vertical-align-center">
            <div class="col-md-4 col-sm-4">
                <h3><b>{{timeleft}}h left</b></h3>
            </div>
            <div class="col-md-4 col-sm-4">
                <span><h3><img src="assets/img/icon-eye.png" alt=""><b>{{watchers}}</b></h3></span>
            </div>
            <div class="col-md-4 col-sm-4">
                <h3><b>$ {{price}}</b></h3>
            </div>
        </div>
        <div class="row text-center">
            <div class="col-md-4 col-sm-4">
                <h4>Today 15:23</h4>
            </div>
            <div class="col-md-4 col-sm-4">
                <h4>Watchers</h4>
            </div>
            <div class="col-md-4 col-sm-4">
                <h4>Current Price</h4>
            </div>
        </div>
    </div>
</script>
<script id="search-result-template-xs" type="text/x-handlebars-template">
    <div class="row">
        <h1><u>{{title}}</u></h1>
    </div>
    <br>
    <div class="row">
        <div class="col-xs-6">
            <a href="javascript:void(0)"><img src="{{thumb}}" alt="" class="img-responsive"></a>
        </div>
        <div class="col-xs-6">
            <p>{{description}}</p>
        </div>
    </div>
    <br>
    <div class="row vertical-align-center">
        <div class="col-xs-6">
            <h3><b>$ {{price}}</b></h3>
        </div>
        <div class="col-xs-6">
            <h4>Current Price</h4>
        </div>
    </div>
    <br>
    <div class="row vertical-align-center">
        <div class="col-xs-6">
            <span><h3><img src="assets/img/icon-eye.png" alt=""><b>{{watchers}}</b></h3></span>
        </div>
        <div class="col-xs-6">
            <h4>Watchers</h4>
        </div>
    </div>
    <br>
    <div class="row vertical-align-center">
        <div class="col-xs-6">
            <h3><b>{{timeleft}}h left</b></h3>
        </div>
        <div class="col-xs-6">
            <h4>Today 15:23</h4>
        </div>
    </div>
</script>
<script type="text/javascript">
    // TODO do not pollute global space... is it possible to do without that?
    function goToSearchResultPage() {
        $('#indexPage').hide();
        $('#searchResultPage').show();
    }

    $('#searchResultPage').hide();

    var featuredProductTemplate = Handlebars.compile($("#featured-product-template").html());
    var searchResultTemplateLg = Handlebars.compile($("#search-result-template-lg").html());
    var searchResultTemplateMdSm = Handlebars.compile($("#search-result-template-md-sm").html());
    var searchResultTemplateXs = Handlebars.compile($("#search-result-template-xs").html());

    function generateFeaturedProductList(data) {
        var generatedFeaturedContent = '';
        data.items.forEach(function(item) {
            generatedFeaturedContent = generatedFeaturedContent + featuredProductTemplate(item);
        });
        $("#featuredProductList").html(generatedFeaturedContent);
    }

    function generateSearchResultLists(data) {
        var generatedSearchResultListLg = '';
        var generatedSearchResultListMdSm = '';
        var generatedSearchResultListXs = '';
        data.items.forEach(function(item) {
            generatedSearchResultListLg = generatedSearchResultListLg + searchResultTemplateLg(item);
            generatedSearchResultListMdSm = generatedSearchResultListMdSm + searchResultTemplateMdSm(item);
            generatedSearchResultListXs = generatedSearchResultListXs + searchResultTemplateXs(item);
        });
        $("#searchResultListLg").html(generatedSearchResultListLg);
        $("#searchResultListMdSm").html(generatedSearchResultListMdSm);
        $("#searchResultListXs").html(generatedSearchResultListXs);
    }

    $.ajax({
        dataType: 'json',
        url: 'assets/data/featured-products.json',
        success: generateFeaturedProductList
    });

    $.ajax({
        dataType: 'json',
        url: 'assets/data/search-results.json',
        success: generateSearchResultLists
    });

   $(function() {
        $("#currentPriceSlider-lg").slider({
            range: true,
            min: 900,
            max: 1800,
            values: [ 1000, 1700 ]
        });
        $("#currentPriceSlider-md-sm").slider({
            range: true,
            min: 900,
            max: 1800,
            values: [ 1000, 1700 ]
        });
        $("#currentPriceSlider-xs").slider({
            range: true,
            min: 900,
            max: 1800,
            values: [ 1000, 1700 ]
        });
   });
</script>
</body>
</html>